#!/usr/bin/env php
<?php

// 2024-08-29 jj5 - this script generates a header file that includes all the header files for the bitmaps.

require_once __DIR__ . '/inc/common.php';

function main( $argv ) {

  chdir( __DIR__ . '/../../' );

  $code = "
// this header file was generated by gen-header.php

#include <avr/pgmspace.h>

";

  foreach ( glob( 'bmp/*.bmp' ) as $path ) {

    $filename = basename( $path, '.bmp' );

    if ( $filename === 'template' ) { continue; }

    $code .= "#include \"{$filename}.h\"\n";

  }

  file_put_contents( 'ino/Symbol_Keyboard/gen/header.h', $code );

}

main( $argv );
